<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet runOnChange="true" id="2020_08_14_create_table_place_block.xml" author="Andrei Zelikov">
        <sql>
            CREATE TABLE `place_block` (
            `id` INT NOT NULL AUTO_INCREMENT,
            `place_id` INT NOT NULL,
            `user_id` INT NOT NULL,
            `block_end` TIMESTAMP NOT NULL,
            PRIMARY KEY (`id`)
            );
        </sql>

        <sql>

            ALTER TABLE `place_block` ADD CONSTRAINT `place_block_fk0` FOREIGN KEY (`user_id`) REFERENCES `user`(`id`);

            ALTER TABLE `place_block` ADD CONSTRAINT `place_block_fk1` FOREIGN KEY (`place_id`) REFERENCES `place`(`id`);

        </sql>
    </changeSet>
</databaseChangeLog>
